<div class="container-fluid fade-in-up">
  <!-- Header Section -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h2 class="mb-0">
            <i class="fas fa-motorcycle me-2"></i>
            Our Motorcycle Fleet
          </h2>
        </div>
        <div class="card-body">
          <p class="lead mb-4">Choose from our premium collection of motorcycles for your next adventure.</p>
          
          <!-- Search and Filter Controls -->
          <div class="row">
            <div class="col-md-6 mb-3">
              <div class="input-group">
                <span class="input-group-text">
                  <i class="fas fa-search"></i>
                </span>
                <input 
                  type="text" 
                  class="form-control" 
                  placeholder="Search motorcycles by name, brand, type, or engine size..."
                  [(ngModel)]="searchTerm"
                  (input)="onSearchChange($event)">
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <select 
                class="form-select" 
                [(ngModel)]="selectedCategory"
                (change)="onCategoryChange($event)">
                <option value="all">All Categories</option>
                <option *ngFor="let category of getCategories()" [value]="category">
                  {{category}}
                </option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border spinner-border-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3">Loading motorcycles...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="alert alert-danger" role="alert">
    <i class="fas fa-exclamation-triangle me-2"></i>
    {{error}}
  </div>

  <!-- Motorcycle Grid -->
  <div *ngIf="!isLoading && !error" class="row">
    <div 
      *ngFor="let motorcycle of getFilteredMotorcycles()" 
      class="col-lg-4 col-md-6 mb-4">
      
      <div class="card motorcycle-card h-100">
        <!-- Motorcycle Image -->
        <div class="position-relative">
          <img 
            [src]="motorcycle.imageFile || 'assets/images/motorcycle-placeholder.jpg'" 
            [alt]="motorcycle.name"
            class="card-img-top motorcycle-image"
            onerror="this.src='https://via.placeholder.com/300x200/007bff/ffffff?text=Motorcycle'">
          
          <!-- Availability Badge -->
          <span 
            class="badge motorcycle-badge"
            [ngClass]="getAvailabilityClass(motorcycle)">
            {{getAvailabilityText(motorcycle)}}
          </span>
        </div>

        <!-- Card Body -->
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">{{motorcycle.name}}</h5>
          <p class="card-text text-muted">{{motorcycle.brand}} â€¢ {{motorcycle.engineSize}}</p>
          <p class="card-text">{{motorcycle.description}}</p>
          
          <!-- Motorcycle Details -->
          <div class="motorcycle-details mb-3">
            <div class="row text-center">
              <div class="col-4">
                <small class="text-muted">Type</small>
                <div class="fw-bold">{{motorcycle.bikeType}}</div>
              </div>
              <div class="col-4">
                <small class="text-muted">Fuel</small>
                <div class="fw-bold">{{motorcycle.fuelType}}</div>
              </div>
              <div class="col-4">
                <small class="text-muted">Transmission</small>
                <div class="fw-bold">{{motorcycle.transmission}}</div>
              </div>
            </div>
          </div>

          <!-- Pricing -->
          <div class="pricing-section mb-3">
            <div class="row text-center">
              <div class="col-4">
                <small class="text-muted">Hourly</small>
                <div class="fw-bold text-primary">{{formatPrice(motorcycle.hourlyRate)}}</div>
              </div>
              <div class="col-4">
                <small class="text-muted">Daily</small>
                <div class="fw-bold text-primary">{{formatPrice(motorcycle.dailyRate)}}</div>
              </div>
              <div class="col-4">
                <small class="text-muted">Weekly</small>
                <div class="fw-bold text-primary">{{formatPrice(motorcycle.weeklyRate)}}</div>
              </div>
            </div>
          </div>

          <!-- Features -->
          <div class="features-section mb-3">
            <small class="text-muted">Features:</small>
            <div class="mt-1">
              <span *ngIf="motorcycle.features" class="badge bg-light text-dark me-1">
                {{motorcycle.features}}
              </span>
              <span class="badge bg-light text-dark me-1">
                {{motorcycle.color}}
              </span>
              <span class="badge bg-light text-dark me-1">
                {{motorcycle.year}}
              </span>
            </div>
          </div>

          <!-- Action Button -->
          <div class="mt-auto">
            <button 
              class="btn btn-primary w-100"
              [disabled]="!motorcycle.available"
              (click)="rentMotorcycle(motorcycle)">
              <i class="fas fa-shopping-cart me-2"></i>
              {{motorcycle.available ? 'Rent Now' : 'Not Available'}}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- No Results -->
  <div *ngIf="!isLoading && !error && getFilteredMotorcycles().length === 0" class="text-center py-5">
    <i class="fas fa-search fa-3x text-muted mb-3"></i>
    <h4 class="text-muted">No motorcycles found</h4>
    <p class="text-muted">Try adjusting your search criteria or browse all categories.</p>
  </div>

  <!-- Available Motorcycles Summary -->
  <div *ngIf="!isLoading && !error && availableMotorcycles.length > 0" class="row mt-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="fas fa-check-circle me-2"></i>
            Available Now ({{availableMotorcycles.length}} motorcycles)
          </h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div *ngFor="let motorcycle of availableMotorcycles.slice(0, 6)" class="col-md-2 col-sm-4 col-6 mb-2">
              <div class="text-center">
                <img 
                  [src]="motorcycle.imageFile || 'https://via.placeholder.com/80x60/007bff/ffffff?text=M'"
                  [alt]="motorcycle.name"
                  class="img-thumbnail"
                  style="width: 80px; height: 60px; object-fit: cover;">
                <div class="small text-muted">{{motorcycle.name}}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Rental Booking Modal -->
<app-rental-booking 
  *ngIf="showBookingModal"
  [motorcycle]="selectedMotorcycle"
  (bookingSubmitted)="onBookingSubmitted($event)"
  (bookingCancelled)="onBookingCancelled()">
</app-rental-booking>

<!-- Rental Confirmation Modal -->
<app-rental-confirmation 
  *ngIf="showConfirmationModal"
  [booking]="currentBooking"
  [motorcycle]="selectedMotorcycle"
  (confirmationClosed)="onConfirmationClosed()"
  (printReceipt)="onPrintReceipt()">
</app-rental-confirmation>